---
title: "Data Frame Summaries in PDF's"
author: Dominic Comtois
date: 2020-12-29
output: 
  pdf_document: 
    latex_engine: xelatex
    includes:
      in_header: ./fig-valign.tex
papersize: letter
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, results = "asis", cache = TRUE)
```

Yes, at last it's settled. I put this off until now because I thought it would require a *Pandoc Lua filter*, and I was too busy with other things. But as I learned a bit more about \LaTeX, I figured a \`simple' `\renewcommand`, combined with a few other hacks, should do the trick. And it did. It does.

So here it is, starting with the *YAML* section.

## I. YAML Header

There is a *tex* file to include. For the *xelatex* engine, it's not mandatory, but there are several advantages to it, so I use it systematically.

      ---
      title: "Data Frame Summaries in PDF's"
      output: 
        pdf_document: 
          latex_engine: xelatex
          includes:
            in_header: ./fig-valign.tex
      ---

## II. Included Preamble *Tex* File

This is the \LaTeX code in *fig-align.tex*:

      \usepackage{graphicx}
      \usepackage[export]{adjustbox}
      \usepackage{letltxmacro}
      \LetLtxMacro{\OldIncludegraphics}{\includegraphics}
      \renewcommand{\includegraphics}[2][]{\raisebox{0.5\height}%
        {\OldIncludegraphics[valign=t,#1]{#2}}}

## III. R Code

```{r, message=FALSE}
library(summarytools)
st_options(
  plain.ascii = FALSE, 
  style = "rmarkdown",
  dfSummary.style = "grid",
  dfSummary.valid.col = FALSE,
  dfSummary.graph.magnif = .52,
  tmp.img.dir = "/tmp"
)

define_keywords(title.dfSummary = "Data Frame Summary in PDF Format")
dfSummary(tobacco)
```

### Closing Remarks

Since we redefined the command \`"\\includegraphics"\`, all images included using "\`!\\[\\](some-image.png)\`" will be impacted. In some cases this will likely be problematic. Eventually we will find a more robust solution without such undesired side-effects. If you are well versed in \LaTeX and think you could solve this, by all means get in touch with me.
